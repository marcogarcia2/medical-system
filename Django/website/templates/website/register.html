{% load static %}
<!DOCTYPE html>
<html lang="en">
{% if messages %}
    <div class="messages">
        {% for message in messages %}
            <div class="alert {% if message.tags == 'error' %}alert-danger{% elif message.tags == 'success' %}alert-success{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - Dok</title>
    <link rel="stylesheet" href="{% static 'website/register.css' %}">
</head>
<body>
    <!-- Cabeçalho fixo -->
    <header>
        <div class="header-left">
            <!-- Botão Voltar à Home -->
            <button class="back-home-btn" onclick="window.location.href='/'">
                <img src="{% static 'website/arrow-icon.png' %}" alt="Voltar"> Voltar à Home
            </button>
        </div>
        <div class="logo">
            <h2>Dok.</h2>
        </div>
    </header>

    <div class="register-container">
        <h1>Crie sua Conta</h1>
        <form method="POST" action="{% url 'register' %}">
            {% csrf_token %}
            <label for="cpf">CPF:</label>
            <input 
                type="text" 
                id="cpf" 
                name="cpf" 
                placeholder="Digite o seu CPF (somente números)" 
                required 
                pattern="\d{11}" 
                title="Insira exatamente 11 números."
                maxlength="11"
                value="{{ request.POST.cpf }}"
            >
        
            <label for="email">Email:</label>
            <input 
                type="email" 
                id="email" 
                name="email" 
                placeholder="Digite seu Email" 
                required 
                value="{{ request.POST.email }}"
            >
        
            <label for="senha">Senha:</label>
            <input 
                type="password" 
                id="senha" 
                name="senha" 
                placeholder="Digite sua Senha" 
                required
            >
        
            <label for="nome">Nome:</label>
            <input 
                type="text" 
                id="nome" 
                name="nome" 
                placeholder="Digite seu Nome" 
                required 
                value="{{ request.POST.nome }}"
            >
        
            <label for="data_nascimento">Data de Nascimento:</label>
            <input 
                type="date" 
                id="data_nascimento" 
                name="data_nascimento" 
                required 
                value="{{ request.POST.data_nascimento }}"
            >
        
            <label for="genero">Gênero:</label>
            <select id="genero" name="genero" required>
                <option value="" {% if not request.POST.genero %}selected{% endif %}>Selecione</option>
                <option value="M" {% if request.POST.genero == 'M' %}selected{% endif %}>Masculino</option>
                <option value="F" {% if request.POST.genero == 'F' %}selected{% endif %}>Feminino</option>
                <option value="N" {% if request.POST.genero == 'N' %}selected{% endif %}>Não Informar</option>
            </select>
        
            <label for="telefone">Telefone:</label>
            <input 
                type="tel" 
                id="telefone" 
                name="telefone" 
                placeholder="Digite seu Telefone" 
                required 
                value="{{ request.POST.telefone }}"
            >
        
            <label for="cep">CEP:</label>
            <input 
                type="text" 
                id="cep" 
                name="cep" 
                placeholder="Digite seu CEP" 
                required 
                value="{{ request.POST.cep }}"
            >
        
            <label for="numero">Número:</label>
            <input 
                type="text" 
                id="numero" 
                name="numero" 
                placeholder="Número da Residência" 
                required 
                value="{{ request.POST.numero }}"
            >
        
            <label for="cidade">Cidade:</label>
            <input 
                type="text" 
                id="cidade" 
                name="cidade" 
                placeholder="Digite sua Cidade" 
                required 
                value="{{ request.POST.cidade }}"
            >
        
            <label for="estado">Estado:</label>
            <select id="estado" name="estado" required>
                <option value="" {% if not request.POST.estado %}selected{% endif %}>Selecione</option>
                <option value="AC" {% if request.POST.estado == 'AC' %}selected{% endif %}>Acre</option>
                <option value="AL" {% if request.POST.estado == 'AL' %}selected{% endif %}>Alagoas</option>
                <option value="AP" {% if request.POST.estado == 'AP' %}selected{% endif %}>Amapá</option>
                <option value="AM" {% if request.POST.estado == 'AM' %}selected{% endif %}>Amazonas</option>
                <option value="BA" {% if request.POST.estado == 'BA' %}selected{% endif %}>Bahia</option>
                <option value="CE" {% if request.POST.estado == 'CE' %}selected{% endif %}>Ceará</option>
                <option value="DF" {% if request.POST.estado == 'DF' %}selected{% endif %}>Distrito Federal</option>
                <option value="ES" {% if request.POST.estado == 'ES' %}selected{% endif %}>Espírito Santo</option>
                <option value="GO" {% if request.POST.estado == 'GO' %}selected{% endif %}>Goiás</option>
                <option value="MA" {% if request.POST.estado == 'MA' %}selected{% endif %}>Maranhão</option>
                <option value="MT" {% if request.POST.estado == 'MT' %}selected{% endif %}>Mato Grosso</option>
                <option value="MS" {% if request.POST.estado == 'MS' %}selected{% endif %}>Mato Grosso do Sul</option>
                <option value="MG" {% if request.POST.estado == 'MG' %}selected{% endif %}>Minas Gerais</option>
                <option value="PA" {% if request.POST.estado == 'PA' %}selected{% endif %}>Pará</option>
                <option value="PB" {% if request.POST.estado == 'PB' %}selected{% endif %}>Paraíba</option>
                <option value="PR" {% if request.POST.estado == 'PR' %}selected{% endif %}>Paraná</option>
                <option value="PE" {% if request.POST.estado == 'PE' %}selected{% endif %}>Pernambuco</option>
                <option value="PI" {% if request.POST.estado == 'PI' %}selected{% endif %}>Piauí</option>
                <option value="RJ" {% if request.POST.estado == 'RJ' %}selected{% endif %}>Rio de Janeiro</option>
                <option value="RN" {% if request.POST.estado == 'RN' %}selected{% endif %}>Rio Grande do Norte</option>
                <option value="RS" {% if request.POST.estado == 'RS' %}selected{% endif %}>Rio Grande do Sul</option>
                <option value="RO" {% if request.POST.estado == 'RO' %}selected{% endif %}>Rondônia</option>
                <option value="RR" {% if request.POST.estado == 'RR' %}selected{% endif %}>Roraima</option>
                <option value="SC" {% if request.POST.estado == 'SC' %}selected{% endif %}>Santa Catarina</option>
                <option value="SP" {% if request.POST.estado == 'SP' %}selected{% endif %}>São Paulo</option>
                <option value="SE" {% if request.POST.estado == 'SE' %}selected{% endif %}>Sergipe</option>
                <option value="TO" {% if request.POST.estado == 'TO' %}selected{% endif %}>Tocantins</option>
            </select>


            <label for="tipo_usuario">Você é:</label>
            <select id="tipo_usuario" name="tipo_usuario" required onchange="mostrarCamposEspecificos()">
                <option value="">Selecione</option>
                <option value="medico">Médico</option>
                <option value="paciente">Paciente</option>
                <option value="atendente">Atendente</option>
            </select>

            <div id="campos_medico" style="display: none;">
                <label for="crm">CRM:</label>
                <input type="text" id="crm" name="crm" placeholder="Digite seu CRM">
        
                <label for="especialidade">Especialidade:</label>
                <input type="text" id="especialidade" name="especialidade" placeholder="Digite sua Especialidade (Ex: Cardiologista)">
            </div>

            <div id="campos_paciente" style="display: none;">
                <label for="convenio">Convênio:</label>
                <input type="text" id="convenio" name="convenio" placeholder="Ex: Unimed">
        
                <label for="altura">Altura (m):</label>
                <input type="text" id="altura" name="altura" placeholder="Ex: 1.75">
        
                <label for="peso">Peso (kg):</label>
                <input type="text" id="peso" name="peso" placeholder="Ex: 70.5">
            </div>

            <div id="campos_atendente" style="display: none;">
                <label for="data_contratacao">Data de Contratação:</label>
                <input type="date" id="data_contratacao" name="data_contratacao">
            </div>

            <button type="submit">Registrar</button>

        </form>
        <script>
            document.getElementById('tipo_usuario').addEventListener('change', function () {
                const tipo = this.value;

                // Referências aos containers e campos
                const medicoCampos = document.getElementById('campos_medico');
                const pacienteCampos = document.getElementById('campos_paciente');
                const atendenteCampos = document.getElementById('campos_atendente');

                // Esconde todos os campos e remove 'required'
                [medicoCampos, pacienteCampos, atendenteCampos].forEach(campo => {
                    campo.style.display = 'none';
                    campo.querySelectorAll('input').forEach(input => input.removeAttribute('required'));
                });

                // Exibe os campos específicos e adiciona 'required'
                if (tipo === 'medico') {
                    medicoCampos.style.display = 'block';
                    medicoCampos.querySelectorAll('input').forEach(input => input.setAttribute('required', 'required'));
                } else if (tipo === 'paciente') {
                    pacienteCampos.style.display = 'block';
                    pacienteCampos.querySelectorAll('input').forEach(input => input.setAttribute('required', 'required'));
                } else if (tipo === 'atendente') {
                    atendenteCampos.style.display = 'block';
                    atendenteCampos.querySelectorAll('input').forEach(input => input.setAttribute('required', 'required'));
                }
            });
        </script>

            
    </div>
</body>
</html>
